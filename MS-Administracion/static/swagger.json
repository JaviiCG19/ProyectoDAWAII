{
  "swagger": "2.0",
  "info": {
    "description": "Documentación de Servicios Web de Administración - DAWA .",
    "version": "1.0.0",
    "title": "Documentación de Administración UG",
    "contact": {
      "email": "juan.cedenor@ug.edu.ec"
    }
  },
  "securityDefinitions": {
    "TokenAuth": {
      "type": "apiKey",
      "name": "tokenapp",
      "in": "header",
      "description": "Ingrese el token JWT recuperado del localStorage del Front-end."
    }
  },
  "security": [
    {
      "TokenAuth": []
    }
  ],
  "tags": [
    { "name": "Empresas", "description": "Entidad principal de Restaurantes" },
    { "name": "Administración", "description": "Gestión de Locales, Mesas y Franjas Horarias" },
    { "name": "Marketing", "description": "Gestión de Promociones" },
    { "name": "Reportes", "description": "Dashboard de control" }
  ],
  "paths": {
    "/admin/empresas": {
      "get": {
        "tags": ["Empresas"],
        "summary": "Lista de Empresas (Global)",
        "responses": { "200": { "description": "OK", "schema": { "$ref": "#/definitions/Response" } } }
      },
      "post": {
        "tags": ["Empresas"],
        "summary": "Registrar Empresa",
        "parameters": [{
          "in": "body", "name": "body", "required": true,
          "schema": { "$ref": "#/definitions/EmpresaSaveDef" }
        }],
        "responses": { "201": { "description": "Creado" } }
      }
    },
    "/admin/locales": {
      "get": {
        "tags": ["Administración"],
        "summary": "Lista de Locales por Empresa",
        "parameters": [{
          "name": "idcia",
          "in": "query",
          "required": true,
          "type": "integer",
          "description": "ID de la compañía (desde localStorage)"
        }],
        "responses": { "200": { "description": "OK" } }
      },
      "post": {
        "tags": ["Administración"],
        "summary": "Registrar Local",
        "parameters": [{
          "in": "body", "name": "body", "required": true,
          "schema": { "$ref": "#/definitions/LocalSaveDef" }
        }],
        "responses": { "201": { "description": "Creado" } }
      }
    },
    "/admin/promociones": {
      "get": {
        "tags": ["Marketing"],
        "summary": "Listar Promociones por Local",
        "parameters": [{
          "name": "idlocal",
          "in": "query",
          "required": true,
          "type": "integer",
          "description": "ID del local para filtrar promociones"
        }],
        "responses": { "200": { "description": "OK", "schema": { "$ref": "#/definitions/Response" } } }
      },
      "post": {
        "tags": ["Marketing"],
        "summary": "Crear Promoción",
        "parameters": [{
          "in": "body", "name": "body", "required": true,
          "schema": { "$ref": "#/definitions/PromoSaveDef" }
        }],
        "responses": { "201": { "description": "Creado" } }
      }
    },
    "/admin/dashboard": {
      "get": {
        "tags": ["Reportes"],
        "summary": "Resumen del Dashboard Gerencial",
        "parameters": [{
          "name": "idcia",
          "in": "query",
          "required": true,
          "type": "integer",
          "description": "ID de compañía para consolidar datos"
        }],
        "responses": { "200": { "description": "OK", "schema": { "$ref": "#/definitions/Response" } } }
      }
    }
  },
  "definitions": {
    "EmpresaSaveDef": {
      "type": "object",
      "required": ["nomleg", "nomfan", "ruc"],
      "properties": {
        "nomleg": { "type": "string" },
        "nomfan": { "type": "string" },
        "ruc": { "type": "string" }
      }
    },
    "LocalSaveDef": {
      "type": "object",
      "required": ["idcia", "detalle", "direccion"],
      "properties": {
        "idcia": { "type": "integer" },
        "detalle": { "type": "string" },
        "direccion": { "type": "string" }
      }
    },
    "PromoSaveDef": {
      "type": "object",
      "required": ["idlocal", "nombre", "descuento"],
      "properties": {
        "idlocal": { "type": "integer" },
        "nombre": { "type": "string" },
        "descuento": { "type": "number" }
      }
    },
    "Response": {
      "type": "object",
      "properties": {
        "result": { "type": "boolean" },
        "message": { "type": "string" },
        "data": { "type": "object" },
        "status": { "type": "integer" }
      }
    }
  }
}